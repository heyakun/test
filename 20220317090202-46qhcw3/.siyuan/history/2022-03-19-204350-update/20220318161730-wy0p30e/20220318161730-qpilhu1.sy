{
	"ID": "20220318161730-qpilhu1",
	"Type": "NodeDocument",
	"Properties": {
		"id": "20220318161730-qpilhu1",
		"title": "05 æ ¹æ®idå‘é€å…¶ä»–è¯·æ±‚",
		"type": "doc",
		"updated": "20220319203710"
	},
	"Children": [
		{
			"ID": "20220318161730-wfllfvo",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20220318161730-wfllfvo"
			},
			"Children": [
				{
					"Type": "NodeStrong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "const { id, name, token } = loginResult.data"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				}
			]
		},
		{
			"ID": "20220318161730-t4e75kw",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20220318161730-t4e75kw"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "baseè·¯å¾„"
				},
				{
					"Type": "NodeStrong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "/ login"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "é‡Œè¯·æ±‚  ç›®å‰ç‚¹å‡»èƒ½æ‹¿åˆ°ä¸‰ä¸ªæ•°æ®"
				}
			]
		},
		{
			"ID": "20220318161730-ebyk21c",
			"Type": "NodeHeading",
			"HeadingLevel": 1,
			"Properties": {
				"id": "20220318161730-ebyk21c"
			},
			"Children": [
				{
					"Type": "NodeHeadingC8hMarker",
					"Data": "## "
				},
				{
					"Type": "NodeText",
					"Data": "baseè·¯å¾„/users /"
				},
				{
					"Type": "NodeCodeSpan",
					"CodeMarkerLen": 1,
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker",
							"Data": "`"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "id"
						},
						{
							"Type": "NodeCodeSpanCloseMarker",
							"Data": "`"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "é‡Œè¯·æ±‚æ›´å¤šç”¨æˆ·æ•°æ®"
				}
			]
		},
		{
			"ID": "20220318161730-c0xfuc8",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20220318161730-c0xfuc8"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "service\\login\\login"
				}
			]
		},
		{
			"ID": "20220318161730-ulybj9p",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"CodeBlockFenceChar": 96,
			"CodeBlockFenceLen": 3,
			"CodeBlockOpenFence": "YGBg",
			"CodeBlockInfo": "dHN4",
			"CodeBlockCloseFence": "YGBg",
			"Properties": {
				"id": "20220318161730-ulybj9p"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```",
					"CodeBlockFenceLen": 3
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "dHN4"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "enum LoginAPI {\n  AccountLogin = '/login',\n  **LoginUserInfo = '/users/'**, // ç”¨æ³•: /users/1\n}\n\nexport function requestUserInfoById(id: number) {\n  return hyRequest.get\u003cIDataType\u003e({\n    url: **LoginAPI.LoginUserInfo + id**,\n    showLoading: false\n  })\n}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```",
					"CodeBlockFenceLen": 3
				}
			]
		},
		{
			"ID": "20220318161730-9m8fn3r",
			"Type": "NodeHTMLBlock",
			"Data": "\u003caside\u003e\nğŸ’¡ 1 è¯·æ±‚ç”¨æˆ·æ•°æ®çš„æ–¹æ³•ç”¨çš„æ˜¯get æ–¹æ³• ï¼Œ\n2 ç”±äºè¯·æ±‚çš„æ•°æ®ç»“æ„å¤ªè¿‡å¤æ‚ï¼Œå¯ä»¥é‡‡ç”¨json to ts æ–¹æ³•\n3 è¿™é‡Œä¸ºäº†ç®€ä¾¿æ“ä½œï¼Œä½¿ç”¨äº†**\u003cIDataType\u003e**  anyç±»å‹",
			"HtmlBlockType": 6,
			"Properties": {
				"id": "20220318161730-9m8fn3r"
			}
		},
		{
			"ID": "20220318161730-g7r18cn",
			"Type": "NodeHTMLBlock",
			"Data": "\u003c/aside\u003e",
			"HtmlBlockType": 6,
			"Properties": {
				"id": "20220318161730-g7r18cn"
			}
		},
		{
			"ID": "20220318161730-3himnvv",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20220318161730-3himnvv"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "2:12 json to ts ä»£ç è½¬æ¨¡å‹"
				}
			]
		},
		{
			"ID": "20220318161730-pvg3331",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20220318161730-pvg3331"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "ç™¾åº¦æœç´¢å³å¯"
				}
			]
		},
		{
			"ID": "20220318161730-1fq6zr0",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20220318161730-1fq6zr0"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "2:17"
				}
			]
		},
		{
			"ID": "20220318161730-nyap994",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"CodeBlockFenceChar": 96,
			"CodeBlockFenceLen": 3,
			"CodeBlockOpenFence": "YGBg",
			"CodeBlockInfo": "dHN4",
			"CodeBlockCloseFence": "YGBg",
			"Properties": {
				"id": "20220318161730-nyap994"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```",
					"CodeBlockFenceLen": 3
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "dHN4"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "mutations: {\n    changeUserInfo(state, userInfo: any) {\n      state.userInfo = userInfo\n    }\n  },\nactions: {\n    async accountLoginAction({ commit }, payload: IAccount) {\n\t\t\t//ç¬¬ä¸€ä¸ªè¯·æ±‚ï¼šæ ¹æ®è´¦å·å¯†ç æ‹¿åˆ° id name token\n\t\t\t//ç¬¬äºŒä¸ªè¯·æ±‚ï¼šæ ¹æ®\n      const userInfoResult = await requestUserInfoById(**id**)\n      const userInfo = userInfoResult.data\n      commit('changeUserInfo', userInfo)\n\n    }\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```",
					"CodeBlockFenceLen": 3
				}
			]
		},
		{
			"ID": "20220318161730-6kigs0m",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20220318161730-6kigs0m"
			},
			"Children": [
				{
					"Type": "NodeCodeSpan",
					"CodeMarkerLen": 1,
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker",
							"Data": "`"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "GET [http://localhost:8080/api/users/1](http://localhost:8080/api/users/1) 401 (Unauthorized)"
						},
						{
							"Type": "NodeCodeSpanCloseMarker",
							"Data": "`"
						}
					]
				}
			]
		},
		{
			"ID": "20220318161730-rxuka86",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20220318161730-rxuka86"
			},
			"Children": [
				{
					"Type": "NodeHeadingC8hMarker",
					"Data": "### "
				},
				{
					"Type": "NodeText",
					"Data": "è¯·æ±‚é”™è¯¯401 æ²¡æœ‰æƒé™"
				}
			]
		},
		{
			"ID": "20220318161730-tuksqfs",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20220318161730-tuksqfs"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "åŸå› ï¼šè¯·æ±‚ç”¨æˆ·æ•°æ®éœ€è¦æºå¸¦token ï¼Œä»¥åŠç™»å½•åçš„æ¯ä¸ªæ“ä½œéƒ½éœ€è¦æºå¸¦token"
				}
			]
		},
		{
			"ID": "20220318161730-v3xdyot",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20220318161730-v3xdyot"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "ä¸¤ç§æ–¹æ³•ï¼š 1 ç™»å½•åå³å¯æ‹¿åˆ° tokenä¿å­˜åˆ°vuexé‡Œï¼Œ æ¯ä¸ªæ“ä½œéƒ½ä½¿ç”¨ï¼Œ"
				},
				{
					"Type": "NodeStrong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "2 ä¿å­˜åˆ°æœ¬åœ°ç¼“å­˜"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				}
			]
		},
		{
			"ID": "20220318161730-4mrhi8g",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"CodeBlockFenceChar": 96,
			"CodeBlockFenceLen": 3,
			"CodeBlockOpenFence": "YGBg",
			"CodeBlockInfo": "dHN4",
			"CodeBlockCloseFence": "YGBg",
			"Properties": {
				"id": "20220318161730-4mrhi8g"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```",
					"CodeBlockFenceLen": 3
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "dHN4"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "import localCache from '@/utils/cache'\n...\nactions: {\n    async accountLoginAction({ commit }, payload: IAccount) {\n      // 1.å®ç°ç™»å½•é€»è¾‘\n      const loginResult = await accountLoginRequest(payload)\n      const { id, token } = loginResult.data\n      commit('changeToken', token)\n      localCache.setCache('token', token)\n}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```",
					"CodeBlockFenceLen": 3
				}
			]
		},
		{
			"ID": "20220318161730-jar4l6n",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20220318161730-jar4l6n"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "request\\index"
				}
			]
		},
		{
			"ID": "20220318161730-8ryi4bm",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20220318161730-8ryi4bm"
			},
			"Children": [
				{
					"Type": "NodeStrong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "è¯·æ±‚æ‹¦æˆªå™¨"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "ï¼Œæ‹¿åˆ°ç¼“å­˜tokenï¼Œåœ¨"
				},
				{
					"Type": "NodeStrong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "è®¾ç½®æƒé™"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				}
			]
		},
		{
			"ID": "20220318161730-5cvl6sh",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"CodeBlockFenceChar": 96,
			"CodeBlockFenceLen": 3,
			"CodeBlockOpenFence": "YGBg",
			"CodeBlockInfo": "dHN4",
			"CodeBlockCloseFence": "YGBg",
			"Properties": {
				"id": "20220318161730-5cvl6sh"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```",
					"CodeBlockFenceLen": 3
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "dHN4"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "requestInterceptor: (config) =\u003e {\n      // æºå¸¦tokençš„æ‹¦æˆª\n      **const token = localCache.getCache('token')**\n      if (token) {\n        **config.headers.Authorization = `Bearer ${token}`**\n      }\n      return config\n    },\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```",
					"CodeBlockFenceLen": 3
				}
			]
		},
		{
			"ID": "20220318161730-j98ldy1",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20220318161730-j98ldy1"
			},
			"Children": [
				{
					"Type": "NodeStrong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeCodeSpan",
							"CodeMarkerLen": 1,
							"Children": [
								{
									"Type": "NodeCodeSpanOpenMarker",
									"Data": "`"
								},
								{
									"Type": "NodeCodeSpanContent",
									"Data": "Bearer ${token}"
								},
								{
									"Type": "NodeCodeSpanCloseMarker",
									"Data": "`"
								}
							]
						},
						{
							"Type": "NodeText",
							"Data": " æ˜¯å›ºå®šæ ¼å¼"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				}
			]
		},
		{
			"ID": "20220318161730-eang1y2",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20220318161730-eang1y2"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "é™¤äº†tokenéœ€è¦ç¼“å­˜ï¼ŒuserInfoä¹Ÿéœ€è¦ç¼“å­˜"
				}
			]
		},
		{
			"ID": "20220318161730-96tax96",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"CodeBlockFenceChar": 96,
			"CodeBlockFenceLen": 3,
			"CodeBlockOpenFence": "YGBg",
			"CodeBlockInfo": "dHN4",
			"CodeBlockCloseFence": "YGBg",
			"Properties": {
				"id": "20220318161730-96tax96"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```",
					"CodeBlockFenceLen": 3
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "dHN4"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "actions: {\n    async accountLoginAction({ commit }, payload: IAccount) {\n\n      const userInfoResult = await requestUserInfoById(**id**)\n      const userInfo = userInfoResult.data\n      commit('changeUserInfo', userInfo)\n      **localCache.setCache('userInfo', userInfo)**\n    }\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```",
					"CodeBlockFenceLen": 3
				}
			]
		},
		{
			"ID": "20220318161730-y6h5u7d",
			"Type": "NodeHeading",
			"HeadingLevel": 1,
			"Properties": {
				"id": "20220318161730-y6h5u7d"
			},
			"Children": [
				{
					"Type": "NodeHeadingC8hMarker",
					"Data": "## "
				},
				{
					"Type": "NodeText",
					"Data": "2:24 è¯·æ±‚ç”¨æˆ·èœå•"
				}
			]
		},
		{
			"ID": "20220318161730-o087xtz",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20220318161730-o087xtz"
			},
			"Children": [
				{
					"Type": "NodeStrong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "ä¸è¯·æ±‚ userinfo åŒç†"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				}
			]
		},
		{
			"ID": "20220318161730-jrkrx6y",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20220318161730-jrkrx6y"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "service\\login  å®šä¹‰è¯·æ±‚å‡½æ•°ï¼Œå¹¶å¯¼å‡º"
				}
			]
		},
		{
			"ID": "20220318161730-2rvxit4",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"CodeBlockFenceChar": 96,
			"CodeBlockFenceLen": 3,
			"CodeBlockOpenFence": "YGBg",
			"CodeBlockInfo": "dHN4",
			"CodeBlockCloseFence": "YGBg",
			"Properties": {
				"id": "20220318161730-2rvxit4"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```",
					"CodeBlockFenceLen": 3
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "dHN4"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "export function requestUserMenusByRoleId(id: number) {\n  return hyRequest.**get**\u003cIDataType\u003e({\n    url: LoginAPI.UserMenus + id + '/menu',\n    showLoading: false\n  })\n}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```",
					"CodeBlockFenceLen": 3
				}
			]
		},
		{
			"ID": "20220318161730-t1gpht6",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20220318161730-t1gpht6"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "store\\login\\login  è¯·æ±‚å‡½æ•°è°ƒç”¨ï¼Œå¹¶ä¸”ä¿å­˜"
				}
			]
		},
		{
			"ID": "20220318161730-amgrul4",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"CodeBlockFenceChar": 96,
			"CodeBlockFenceLen": 3,
			"CodeBlockOpenFence": "YGBg",
			"CodeBlockInfo": "dHN4",
			"CodeBlockCloseFence": "YGBg",
			"Properties": {
				"id": "20220318161730-amgrul4"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```",
					"CodeBlockFenceLen": 3
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "dHN4"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "import { requestUserMenusByRoleId } from '@/service/login/login'\n\nmutations: {\n    changeUserMenus(state, userMenus: any) {\n      state.userMenus = userMenus\n    }\n  },\nactions: {\n    async accountLoginAction({ commit }, payload: IAccount) {\n\t\t\t// 1.å®ç°ç™»å½•é€»è¾‘\n\n\t\t\t// 2.è¯·æ±‚ç”¨æˆ·ä¿¡æ¯\n\n      // 3.è¯·æ±‚ç”¨æˆ·èœå•\n      const userMenusResult = await requestUserMenusByRoleId(userInfo.role.id)\n      const userMenus = userMenusResult.data\n      commit('changeUserMenus', userMenus)\n      localCache.setCache('userMenus', userMenus)\n\n    },\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```",
					"CodeBlockFenceLen": 3
				}
			]
		}
	]
}